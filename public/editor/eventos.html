<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eventos - Editor Excentrica</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/editor/editor.css">
    <link rel="stylesheet" href="/editor/eventos.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <a href="/"><span>‚ö°</span> Excentrica</a>
                <span class="admin-badge">EDITOR</span>
            </div>
            <nav class="admin-nav">
                <a href="/editor/" class="admin-nav-item">
                    <span class="icon">üìä</span> Dashboard
                </a>
                <a href="/editor/noticias.html" class="admin-nav-item">
                    <span class="icon">üì∞</span> Noticias
                </a>
                <a href="/editor/productos.html" class="admin-nav-item">
                    <span class="icon">üõí</span> Productos
                </a>
                <a href="/editor/eventos.html" class="admin-nav-item active">
                    <span class="icon">üìÖ</span> Eventos
                </a>
                <a href="/editor/categorias.html" class="admin-nav-item">
                    <span class="icon">üìÅ</span> Categorias
                </a>
                <a href="/editor/zonas.html" class="admin-nav-item">
                    <span class="icon">üìç</span> Zonas
                </a>
                <a href="/editor/cine.html" class="admin-nav-item">
                    <span class="icon">üé¨</span> Cine
                </a>
                <a href="/editor/gastronomia.html" class="admin-nav-item">
                    <span class="icon">üçΩÔ∏è</span> Gastronomia
                </a>
                <a href="/editor/alojamiento.html" class="admin-nav-item">
                    <span class="icon">üè®</span> Alojamiento
                </a>
                <a href="/editor/transporte.html" class="admin-nav-item">
                    <span class="icon">üöå</span> Transporte
                </a>
                <a href="/editor/servicios.html" class="admin-nav-item">
                    <span class="icon">üîß</span> Servicios
                </a>
                <a href="/editor/puntos-interes.html" class="admin-nav-item">
                    <span class="icon">üìç</span> Turismo
                </a>
                <div class="admin-nav-divider"></div>
                <a href="/" class="admin-nav-item">
                    <span class="icon">üè†</span> Volver al sitio
                </a>
                <a href="#" onclick="auth.logout(); return false;" class="admin-nav-item">
                    <span class="icon">üö™</span> Cerrar sesion
                </a>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="admin-main">
            <header class="admin-header">
                <h1>üìÖ Gestion de Eventos</h1>
                <div class="admin-user">
                    <span id="user-name">Editor</span>
                    <button class="btn btn-primary btn-sm" onclick="showCreateModal()">
                        <span>‚ûï</span> Nuevo Evento
                    </button>
                </div>
            </header>

            <div class="admin-content">
                <!-- Stats -->
                <div class="stats-grid mb-4">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-events">0</span>
                            <span class="stat-label">Total eventos</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-info">
                            <span class="stat-value" id="pending-events">0</span>
                            <span class="stat-label">Pendientes</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="approved-events">0</span>
                            <span class="stat-label">Aprobados</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîú</div>
                        <div class="stat-info">
                            <span class="stat-value" id="upcoming-events">0</span>
                            <span class="stat-label">Proximos</span>
                        </div>
                    </div>
                </div>

                <!-- Compact filters -->
                <div class="d-flex gap-3 mb-4 flex-wrap">
                    <input type="text" id="search" class="form-control" placeholder="Buscar..." style="max-width: 200px;">
                    <select id="filter-status" class="form-control" style="max-width: 150px;">
                        <option value="">Todos los estados</option>
                        <option value="pending">Pendiente</option>
                        <option value="approved">Aprobado</option>
                        <option value="rejected">Rechazado</option>
                    </select>
                    <select id="filter-date" class="form-control" style="max-width: 150px;">
                        <option value="">Todas las fechas</option>
                        <option value="upcoming">Proximos</option>
                        <option value="past">Pasados</option>
                    </select>
                    <button class="btn btn-outline btn-sm" onclick="resetFilters()">
                        Limpiar
                    </button>
                </div>

                <!-- Events Table -->
                <div class="card">
                    <div class="card-body">
                        <div id="events-table-container">
                            <div class="text-center p-4">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para crear/editar evento -->
    <div class="modal-backdrop" id="event-modal-backdrop" onclick="closeModal()"></div>
    <div class="modal" id="event-modal">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">Nuevo Evento</h3>
            <div class="modal-header-actions">
                <button type="button" class="btn btn-outline btn-sm" onclick="closeModal()">Cancelar</button>
                <button type="submit" form="event-form" class="btn btn-primary btn-sm">Guardar Evento</button>
            </div>
        </div>
        <div class="modal-body">
            <form id="event-form" onsubmit="saveEvent(event)">
                <input type="hidden" id="event-id">
                <input type="hidden" id="event-imagen">

                <div class="modal-grid-3-compact">
                    <!-- Column 1: Informacion Principal -->
                    <div class="form-column">
                        <div class="form-group">
                            <label for="event-titulo">Titulo *</label>
                            <input type="text" id="event-titulo" class="form-control" placeholder="Nombre del evento" required>
                        </div>

                        <div class="form-group">
                            <label for="event-descripcion">Descripcion *</label>
                            <textarea id="event-descripcion" class="form-control" rows="3" placeholder="Describe el evento..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="event-fecha">üìÖ Fecha del Evento *</label>
                            <input type="datetime-local" id="event-fecha" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label for="event-lugar">üìç Lugar *</label>
                            <input type="text" id="event-lugar" class="form-control" placeholder="Ej: Teatro 25 de Mayo" required>
                        </div>

                        <div class="form-group">
                            <label for="event-direccion">üó∫Ô∏è Direccion</label>
                            <input type="text" id="event-direccion" class="form-control" placeholder="Direccion completa">
                        </div>
                    </div>

                    <!-- Column 2: Detalles y Contacto -->
                    <div class="form-column">
                        <div class="form-group">
                            <label for="event-precio">üí∞ Precio de Entrada</label>
                            <input type="number" id="event-precio" class="form-control" step="0.01" min="0" placeholder="0 para eventos gratuitos">
                        </div>

                        <div class="form-group">
                            <label for="event-categoria">üìÅ Categoria</label>
                            <select id="event-categoria" class="form-control">
                                <option value="">Sin categoria</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="event-zona">üåé Zona</label>
                            <select id="event-zona" class="form-control">
                                <option value="">Sin zona especifica</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="event-telefono">üìû Telefono</label>
                            <input type="tel" id="event-telefono" class="form-control" placeholder="+54 9 385 123 4567">
                        </div>

                        <div class="form-group">
                            <label for="event-whatsapp">üí¨ WhatsApp</label>
                            <input type="tel" id="event-whatsapp" class="form-control" placeholder="+54 9 385 123 4567">
                        </div>

                        <div class="form-group">
                            <label for="event-web">üåê Sitio Web</label>
                            <input type="url" id="event-web" class="form-control" placeholder="https://ejemplo.com">
                        </div>

                        <div class="form-group">
                            <label for="event-estado">‚öôÔ∏è Estado</label>
                            <select id="event-estado" class="form-control">
                                <option value="pending">Pendiente</option>
                                <option value="approved">Aprobado</option>
                                <option value="rejected">Rechazado</option>
                            </select>
                        </div>
                    </div>

                    <!-- Column 3: Imagen -->
                    <div class="form-column">
                        <div class="form-group">
                            <label for="event-imagen-file">üì∏ Imagen del Evento *</label>
                            <input type="file" id="event-imagen-file" class="form-control-file" accept="image/*" onchange="uploadEventImage(event)">
                            <div id="event-image-preview" class="image-preview-compact"></div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/config.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/components.js"></script>
    <script src="/editor/eventos.js"></script>
</body>
</html>
