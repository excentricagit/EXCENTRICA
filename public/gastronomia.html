<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GastronomÃ­a - Excentrica</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <!-- Sidebar de NavegaciÃ³n Lateral Fijo -->
    <nav class="sidebar-nav">
        <a href="/" class="sidebar-nav-item">
            <span class="icon">ğŸ </span>
            <span>Inicio</span>
        </a>

        <div class="sidebar-divider"></div>

        <div class="sidebar-section-title">Explorar</div>

        <a href="/noticias.html" class="sidebar-nav-item">
            <span class="icon">ğŸ“°</span>
            <span>Noticias</span>
        </a>
        <a href="/mercaderia.html" class="sidebar-nav-item">
            <span class="icon">ğŸ›’</span>
            <span>MercaderÃ­a</span>
        </a>
        <a href="/eventos.html" class="sidebar-nav-item">
            <span class="icon">ğŸ“…</span>
            <span>Eventos</span>
        </a>
        <a href="/videos.html" class="sidebar-nav-item">
            <span class="icon">ğŸ¥</span>
            <span>Videos</span>
        </a>

        <div class="sidebar-divider"></div>

        <div class="sidebar-section-title">Servicios</div>

        <a href="/gastronomia.html" class="sidebar-nav-item active">
            <span class="icon">ğŸ½ï¸</span>
            <span>GastronomÃ­a</span>
        </a>
        <a href="/alojamiento.html" class="sidebar-nav-item">
            <span class="icon">ğŸ¨</span>
            <span>Alojamiento</span>
        </a>
        <a href="/transporte.html" class="sidebar-nav-item">
            <span class="icon">ğŸšŒ</span>
            <span>Transporte</span>
        </a>
        <a href="/servicios.html" class="sidebar-nav-item">
            <span class="icon">ğŸ”§</span>
            <span>Servicios</span>
        </a>
        <a href="/puntos-interes.html" class="sidebar-nav-item">
            <span class="icon">ğŸ“</span>
            <span>Turismo</span>
        </a>

        <div class="sidebar-divider"></div>

        <a href="/cine.html" class="sidebar-nav-item">
            <span class="icon">ğŸ¬</span>
            <span>Cine</span>
        </a>
        <a href="/contacto.html" class="sidebar-nav-item">
            <span class="icon">ğŸ“</span>
            <span>Contacto</span>
        </a>

    </nav>

    <header class="header">
        <div class="header-inner">
            <a href="/" class="logo"><span>âš¡</span> Excentrica</a>
            <div class="header-search">
                <input type="search" placeholder="Buscar en Excentrica..." />
            </div>
            <div class="user-menu"></div>
            <button class="menu-toggle"><span></span><span></span><span></span></button>
        </div>
    </header>

    <main class="main">
        <div class="layout-sidebar">
            <!-- Contenido principal -->
            <div class="content">
                <div class="page-header">
                    <h1 class="page-title">ğŸ½ï¸ GastronomÃ­a</h1>
                    <p class="page-subtitle">Restaurantes y servicios gastronÃ³micos en Santiago del Estero</p>
                </div>

                <!-- Filtros -->
                <div class="d-flex gap-3 mb-4 flex-wrap">
                    <input type="text" id="search-input" placeholder="Buscar restaurantes..."
                           class="form-control" style="max-width:250px;">
                    <select id="category-filter" class="form-control" style="max-width:200px;">
                        <option value="">Todas las categorÃ­as</option>
                    </select>
                    <select id="zone-filter" class="form-control" style="max-width:150px;">
                        <option value="">Todas las zonas</option>
                    </select>
                </div>

                <!-- Grid de gastronomÃ­a -->
                <div id="gastronomy-grid" class="grid grid-3">
                    <div class="text-center p-5"><div class="spinner spinner-lg mx-auto"></div></div>
                </div>

                <!-- PaginaciÃ³n -->
                <div id="pagination" class="mt-4"></div>
            </div>

            <!-- Sidebar derecho -->
            <aside class="sidebar">
                <!-- Widget de usuario -->
                <div class="widget" id="user-widget" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.12), rgba(20, 20, 30, 0.95)); border: 1px solid rgba(168, 85, 247, 0.25);">
                    <div class="widget-title" style="color: #a855f7; text-shadow: 0 0 10px rgba(168, 85, 247, 0.5);">Mi Cuenta</div>
                    <div id="user-widget-content">
                        <p style="color: #e2e8f0; font-size: 0.9rem; margin-bottom: 0.75rem;">Inicia sesion para acceder a todas las funciones.</p>
                        <button class="btn btn-block mb-2" style="background: linear-gradient(135deg, #a855f7, #7c3aed); border: none; box-shadow: 0 0 15px rgba(168, 85, 247, 0.4); color: #fff;" onclick="window.location.href='/login.html'">Iniciar Sesion</button>
                        <button class="btn btn-block" style="background: transparent; border: 1px solid #a855f7; color: #e2e8f0;" onclick="window.location.href='/registro.html'">Crear Cuenta</button>
                    </div>
                </div>

                <!-- Widget de contenido patrocinado -->
                <div class="widget" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.12), rgba(20, 20, 30, 0.95)); border: 1px solid rgba(168, 85, 247, 0.25);">
                    <div class="widget-title" style="color: #a855f7; text-shadow: 0 0 10px rgba(168, 85, 247, 0.5);">Contenido Patrocinado</div>
                    <div id="sponsored-widget">
                        <div style="background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.2); border-radius: 10px; padding: 1rem; margin-bottom: 0.75rem;">
                            <p style="color: #f1f5f9; font-size: 0.9rem; margin-bottom: 0.25rem; font-weight: 600;">Tu negocio puede estar aqui</p>
                            <p style="color: #cbd5e1; font-size: 0.8rem;">Contactanos para promocionar tu empresa</p>
                        </div>
                        <a href="/contacto.html" class="btn btn-sm btn-block" style="background: transparent; border: 1px solid #a855f7; color: #e2e8f0;">Quiero anunciar</a>
                    </div>
                </div>

                <!-- Widget de redes sociales -->
                <div class="widget" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.12), rgba(20, 20, 30, 0.95)); border: 1px solid rgba(168, 85, 247, 0.25);">
                    <div class="widget-title" style="color: #a855f7; text-shadow: 0 0 10px rgba(168, 85, 247, 0.5);">Seguinos</div>
                    <div style="display: flex; gap: 1rem; justify-content: center; padding: 0.5rem 0;">
                        <a href="https://facebook.com/excentrica" target="_blank" rel="noopener" title="Facebook" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); transition: all 0.3s;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#a855f7"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </a>
                        <a href="https://instagram.com/excentricaok" target="_blank" rel="noopener" title="Instagram" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); transition: all 0.3s;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#a855f7"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                        </a>
                        <a href="https://open.spotify.com/user/excentrica" target="_blank" rel="noopener" title="Spotify" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); transition: all 0.3s;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#a855f7"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
                        </a>
                        <a href="https://youtube.com/revistaexcentrica" target="_blank" rel="noopener" title="YouTube" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); transition: all 0.3s;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="#a855f7"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                        </a>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 Excentrica. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="/js/config.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/components.js"></script>
    <script src="/js/app.js"></script>
    <script>
        let currentPage = 1;

        async function loadGastronomy(page = 1) {
            currentPage = page;
            const search = document.getElementById('search-input').value;
            const category = document.getElementById('category-filter').value;
            const zone = document.getElementById('zone-filter').value;

            Components.showLoading('#gastronomy-grid');

            try {
                const response = await api.getGastronomy({ page, limit: 12, search, category, zone });
                const container = document.getElementById('gastronomy-grid');

                const items = response.data?.items || [];
                if (response.success && items.length > 0) {
                    container.innerHTML = items.map(g => Components.gastronomyCard(g)).join('');
                    document.getElementById('pagination').innerHTML = Components.pagination(
                        response.data.pagination.page,
                        response.data.pagination.pages,
                        'loadGastronomy'
                    );
                } else {
                    Components.showEmpty(container, 'No hay restaurantes disponibles', 'ğŸ½ï¸');
                    document.getElementById('pagination').innerHTML = '';
                }
            } catch (e) {
                Components.showError('#gastronomy-grid', 'Error cargando restaurantes');
            }

            Utils.updateUrl({ page: page > 1 ? page : null, category: category || null, zone: zone || null, search: search || null });
        }

        const debouncedSearch = Utils.debounce(() => loadGastronomy(1), 500);

        document.addEventListener('DOMContentLoaded', async () => {
            // Cargar usuario en sidebar
            const user = auth.getUser();
            const userWidget = document.getElementById('user-widget-content');
            if (user && userWidget) {
                userWidget.innerHTML = `
                    <p style="color: #f1f5f9; font-size: 0.95rem; margin-bottom: 0.5rem;">Hola, ${Utils.escapeHtml(user.name || 'Usuario')}</p>
                    <p style="color: #cbd5e1; font-size: 0.8rem; margin-bottom: 0.75rem;">${Utils.escapeHtml(user.email)}</p>
                    ${user.role === 'admin' || user.role === 'editor' ? '<a href="/editor/" class="btn btn-block mb-2" style="background: linear-gradient(135deg, #a855f7, #7c3aed); border: none; box-shadow: 0 0 15px rgba(168, 85, 247, 0.4); color: #fff;">Panel de Editor</a>' : ''}
                    <button class="btn btn-block" style="background: transparent; border: 1px solid #a855f7; color: #e2e8f0;" onclick="auth.logout()">Cerrar Sesion</button>
                `;
            }

            // Cargar filtros
            await Promise.all([
                App.loadCategories('category-filter', 'gastronomia'),
                App.loadZones('zone-filter')
            ]);

            const params = Utils.getUrlParams();
            if (params.category) document.getElementById('category-filter').value = params.category;
            if (params.zone) document.getElementById('zone-filter').value = params.zone;
            if (params.search) document.getElementById('search-input').value = params.search;

            loadGastronomy(parseInt(params.page) || 1);

            document.getElementById('search-input').addEventListener('input', debouncedSearch);
            document.getElementById('category-filter').addEventListener('change', () => loadGastronomy(1));
            document.getElementById('zone-filter').addEventListener('change', () => loadGastronomy(1));
        });
    </script>
</body>
</html>
